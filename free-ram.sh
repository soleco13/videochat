#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è RAM –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

echo "üßπ –û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞..."
echo ""

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
echo "üìä –î–æ –æ—á–∏—Å—Ç–∫–∏:"
free -h

echo ""
echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é –æ—á–∏—Å—Ç–∫—É..."

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫
sync

# –û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫—ç—à–µ–π
echo 3 > /proc/sys/vm/drop_caches 2>/dev/null && echo "‚úÖ –û—á–∏—â–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫—ç—à–∏" || echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à–∏ (—Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ root)"

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (—Å—Ç–∞—Ä—à–µ 1 –¥–Ω—è)
journalctl --vacuum-time=1d 2>/dev/null && echo "‚úÖ –û—á–∏—â–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏"

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
find /tmp -type f -atime +7 -delete 2>/dev/null && echo "‚úÖ –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∏–∑ /tmp"
find /var/tmp -type f -atime +7 -delete 2>/dev/null && echo "‚úÖ –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∏–∑ /var/tmp"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å)
# systemctl restart video-chat-app && sleep 2 && echo "‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω video-chat-app"

echo ""
echo "üìä –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:"
free -h

echo ""
echo "‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"

